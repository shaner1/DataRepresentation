<!DOCTYPE html>
<html>
    <head>
<!--     <link rel="stylesheet" href="styles.css">-->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
       
       <title>
           RestfulAPI
       </title>
       
    </head>
    
    <body>
        <!-- Navigation Menu -->
        <!-- Menu contains links to other pages on the site-->   
        <nav>
            <ul>
                <!-- Clickable links in the nav menu -->
                <li><a href="">Shopping List</a></li>
                <li><a href="index.html">Create Stock</a></li>

            </ul>
        </nav>
        <!-- End navigation menu -->
        
        <div id = "createUpdate">
              <h2>ShoppingList</h2>
               <table id="addTable">
                    <tr>
                        <td>Product</td><td><input type="text" name="product" required></td>
                    </tr>
                    <tr>
                        <td>Quantity</td><td><input type="number" name="quantity"></td>
    <!--                    https://www.freecodecamp.org/news/form-validation-with-html5-and-javascript/-->
                    </tr>
                    
                    <tr>
    <!--                   id so getStockITem can call it -->
    <!--                    <td></td><td><button id="createEditButton" onclick="doCreate()">Create</button></td>-->
                       <td></td><td><input type="submit" id="createButton" onclick="doCreate()" value="Add To Cart"></td>

                    </tr>
                </table>
            </div>
            
            <div id = "list">
            <h2>Shopping List</h2>

            <table class="table" id="ShoppingList">
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th></th>
                </tr>
            </table>
        </div>
            
    </body>
    
    
    <script>
        
        function populateTable(){
            //ajax getAll
            $.ajax({
                url:'/shoppingList',
                method:'GET',
                dataType:'JSON',
                success:function(results){
                    for (shoppingItem of results){
                        addShoppingItemToTable(shoppingItem)
                    }                    
                }})}
        
        
        function addShoppingItemToTable(shoppingItem){
            //console.log("working")
            tableElem = document.getElementById("ShoppingList")
            rowElem = tableElem.insertRow(-1)

            cell1 = rowElem.insertCell(0)
            cell1.innerHTML = shoppingItem.product
            cell2 = rowElem.insertCell(1)
            cell2.innerHTML = shoppingItem.quantity
            cell3 = rowElem.insertCell(2)
            cell3.innerHTML = '<button onclick="doDelete(this)">Delete</button>'
        }
//      once page is loaded called the function
        populateTable()
        
        
//        //      get details from the table 
//        function getShoppingList(){
//            var form = document.getElementById('addTable')
//            var shoppingItem = {}
//
//            shoppingItem.product = form.querySelector('input[name="product"]').value
//            console.log(stockItem.product)
//
//            shoppingItem.quantity = form.querySelector('input[name="quantity"]').value
//            //console.log(stockItem)
//            return shoppingItem
//        }
        
    </script>